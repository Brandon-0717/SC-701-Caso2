CREATE DATABASE SC701_CASO2;
GO

USE SC701_CASO2;
GO

CREATE TABLE PRODUCTO(
	PRODUCTO_PK UNIQUEIDENTIFIER NOT NULL,
	Codigo_Producto NVARCHAR(50) NOT NULL UNIQUE,
	Nombre NVARCHAR(50) NOT NULL,
	Descripcion NVARCHAR(300) NOT NULL,
	Cantidad INT NOT NULL,
	Precio Decimal(18,2) NOT NULL,
	Estado BIT NOT NULL,
	Marca NVARCHAR(50) NOT NULL,
	Fecha_Ingreso DATE NOT NULL,
		CONSTRAINT PRODUCTO_PRODUCTO_PK_CK PRIMARY KEY(PRODUCTO_PK)
);
GO

CREATE TABLE ORDEN(
	ORDEN_PK UNIQUEIDENTIFIER NOT NULL,
	Fecha DATETIME NOT NULL,
	Total Decimal(18,2) NOT NULL,
		CONSTRAINT ORDEN_ORDEN_PK_CK PRIMARY KEY(ORDEN_PK)
);
GO

CREATE TABLE ORDEN_DETALLE(
	ORDEN_FK_ORDEN_DETALLE UNIQUEIDENTIFIER NOT NULL,
	PRODUCTO_FK_ORDEN_DETALLE UNIQUEIDENTIFIER NOT NULL,
	Cantidad INT NOT NULL,
	Precio_Unitario Decimal(18,2) NOT NULL,
	Subtotal Decimal(18,2) NOT NULL,
		CONSTRAINT ORDEN_ORDEN_FK_CK FOREIGN KEY(ORDEN_FK_ORDEN_DETALLE) REFERENCES ORDEN(ORDEN_PK),
		CONSTRAINT PRODUCTO_PRODUCTO_FK_CK FOREIGN KEY(PRODUCTO_FK_ORDEN_DETALLE) REFERENCES PRODUCTO(PRODUCTO_PK),
		CONSTRAINT ORDEN_DETALLE_PK_CK PRIMARY KEY(ORDEN_FK_ORDEN_DETALLE,PRODUCTO_FK_ORDEN_DETALLE)
);
GO

--INSERTS

INSERT INTO PRODUCTO (PRODUCTO_PK, Codigo_Producto, Nombre, Descripcion, Cantidad, Precio, Estado, Marca, Fecha_Ingreso)
VALUES
('A1F3B8C0-9A6F-4DB1-9A84-91C9E32F11A1', 'PROD-001', 'Laptop Lenovo', 'Laptop Lenovo IdeaPad 15"', 50, 550000, 1, 'Lenovo', '2025-01-10'),
('B2A7D940-4D22-4A98-8A1B-77F94CE221A2', 'PROD-002', 'Mouse Logitech', 'Mouse inalámbrico Logitech M185', 200, 8000, 1, 'Logitech', '2025-01-11'),
('C3B9E3F1-1935-45A1-A77E-2F10923EB1A3', 'PROD-003', 'Teclado Redragon', 'Teclado mecánico Redragon K552 Kumara', 100, 25000, 1, 'Redragon', '2025-01-12'),
('D4C1F9A2-5567-4D3B-A20C-61BC923F81A4', 'PROD-004', 'Monitor Samsung', 'Monitor Samsung 24” LED Full HD', 40, 85000, 1, 'Samsung', '2025-01-13'),
('E5D7A1B3-8C44-49B9-B1AF-11DC5432F1A5', 'PROD-005', 'Audífonos Sony', 'Audífonos Sony WH-CH510 Bluetooth', 70, 32000, 1, 'Sony', '2025-01-14');
GO

INSERT INTO ORDEN (ORDEN_PK, Fecha, Total)
VALUES
('11111111-AAAA-4BBB-8CCC-000000000001', '2025-02-01 10:25:00', 630000),
('22222222-BBBB-4CCC-8DDD-000000000002', '2025-02-02 14:10:00', 108000),
('33333333-CCCC-4DDD-8EEE-000000000003', '2025-02-03 09:45:00', 25000),
('44444444-DDDD-4EEE-8FFF-000000000004', '2025-02-04 16:30:00', 117000),
('55555555-EEEE-4FFF-8999-000000000005', '2025-02-05 11:15:00', 85000);
GO

INSERT INTO ORDEN_DETALLE (ORDEN_FK_ORDEN_DETALLE, PRODUCTO_FK_ORDEN_DETALLE, Cantidad, Precio_Unitario, Subtotal)
VALUES
-- Orden 1: Laptop + Mouse
('11111111-AAAA-4BBB-8CCC-000000000001', 'A1F3B8C0-9A6F-4DB1-9A84-91C9E32F11A1', 1, 550000, 550000),
('11111111-AAAA-4BBB-8CCC-000000000001', 'B2A7D940-4D22-4A98-8A1B-77F94CE221A2', 1, 8000, 8000),

-- Orden 2: Monitor + Mouse + Teclado
('22222222-BBBB-4CCC-8DDD-000000000002', 'D4C1F9A2-5567-4D3B-A20C-61BC923F81A4', 1, 85000, 85000),
('22222222-BBBB-4CCC-8DDD-000000000002', 'B2A7D940-4D22-4A98-8A1B-77F94CE221A2', 1, 8000, 8000),
('22222222-BBBB-4CCC-8DDD-000000000002', 'C3B9E3F1-1935-45A1-A77E-2F10923EB1A3', 1, 25000, 25000);
GO
